function isFunction(e){return e instanceof Function}function isArray(e){return e instanceof Array}function isObject(e){return e instanceof Object}function isElement(e){return e instanceof Element}function isText(e){return e instanceof Text}function isString(e){return"string"==typeof e}function getRelateBoundingRect(e,t){var n=e.getBoundingClientRect(),i=t.getBoundingClientRect(),s=t.scrollTop,r=t.scrollLeft;return{top:n.top-i.top+s,left:n.left-i.left+r}}function toggleHideElements(e,t,n,i){function s(e,t,n,i,r){t[e].style.opacity=i?0:1,setTimeout(function(){++e<t.length&&s(e,t,n,i)}.bind(null,e,t,n,i),1e3*n)}s(0,e,t,n),setTimeout(i,e.length*t*1e3)}function triggerCSS(){document.body.offsetWidth}function ClassEvents(e){this._events={},this._target=e.event?e.event.target:null,this._argument=e.event,this.dispatchClassEvent=function(e,t){try{this._events[e].forEach(function(n){n(e,t)}.bind(this))}catch(t){console.warn("ERROR: no such event type - "+e+"."),console.warn(t)}},this.addEventListener=function(e,t){try{return this._events[e].push(t),this._events[e][this._events[e].length-1]}catch(i){if(this._target){var n={};n[e]=t.bind(null,this._argument),this._target.setEventListeners(n)}else console.warn("ERROR: no such event type - "+e+".")}},this.removeEventListener=function(e,t){try{var n=this._events[e].indexOf(t);if(n>-1)this._events[e].splice(n,1);else if(this.target){var i={};i[e]=t,this._target.removeEventListeners(i)}else console.warn("ERROR: no such event listener at type - "+e+"."),console.log(t)}catch(n){this._target?this._target.removeEventListener(e,t):console.warn("ERROR: no such event type - "+e+".")}};for(var t=0;t<e.types.length;t++)"string"==typeof e.types[t]&&(this._events[e.types[t]]=[])}function Card(e){var t={cover:"BACK",hidden:!1},n={move:1,turn:.2,remove:1,rotate:1,hide:1},i={remove:{deltaHeight:10,opacity:0},hide:{deltaHeight:10,opacity:0}},s={gameField:null,parent:null,container:null,covers:{back:null,front:null}},r="HIDDEN",a={normal:"CARD__CONTAINER",turned:"CARD__CONTAINER--TURNED"},o={common:"CARD__COVER",back:"CARD__BACK",front:"CARD__FRONT"};this.dataset={},this.style={},this.toggleHidden=function(){switch(t.hidden){case!0:s.container.classList.remove(r),t.hidden=!1;break;case!1:s.container.classList.add(r),t.hidden=!0}},this.remove=function(e){if(e){var t=getRelateBoundingRect(s.container,s.gameField);triggerCSS();var r=s.container.cloneElement({deep:!0,listeners:!0});s.parent.removeChild(s.container),s.container=r,s.container.style.left=t.left+"PX",s.container.style.top=t.top+"PX",s.gameField.appendChildren(s.container),triggerCSS(),s.container.style.left=t.left-i.remove.deltaHeight/2+"PX",s.container.style.top=t.top-i.remove.deltaHeight/2+"PX",r.style.height=r.clientHeight+i.remove.deltaHeight+"PX",r.style.opacity=i.remove.opacity,setTimeout(function(){this.dispatchClassEvent("remove"),r.parentNode.removeChild(r)}.bind(this),1e3*n.remove)}else this.dispatchClassEvent("remove"),s.parent.removeChild(s.container)},this.hide=function(e){if(e){triggerCSS();var t=s.container.cloneElement({deep:!0,listeners:!0});s.parent.removeChild(s.container),s.gameField.appendChildren(t),s.container=t,t.style.height=t.clientHeight+e.changes.hide.deltaHeight+"PX",t.style.opacity=e.changes.hide.opacity,setTimeout(function(){this.dispatchClassEvent("hide"),s.container.classList.add(r)}.bind(this),1e3*e.duration.hide)}else s.container.classList.add(r)},this.unhide=function(e){e?(triggerCSS(),s.container.classList.remove(r),s.container.style.height=s.container.clientHeight-e.changes.hide.deltaHeight+"PX",s.container.style.opacity=!e.changes.hide.opacity,setTimeout(function(){var e=s.container.cloneElement({deep:!0,listeners:!0});s.container.parentNode.removeChildren(s.container),s.parent.appendChild(e),s.container=e,this.dispatchClassEvent("unhide")}.bind(this),1e3*e.duration.hide)):s.container.classList.remove(r)},this.rotate=function(e,t){t&&(e=e?e/Math.abs(e)*Math.abs(e)%360:0,s.container.style.transform="ROTATE("+e+"DEG)",setTimeout(function(){this.dispatchClassEvent("rotate")}.bind(this),1e3*n.rotate))},this.turn=function(e){if(e){switch(triggerCSS(),t.cover){case"BACK":s.container.setAttribute("data-tid","Card-flipped"),s.container.classList.add(a.turned),t.cover="FRONT";break;case"FRONT":s.container.setAttribute("data-tid","Card"),s.container.classList.remove(a.turned),t.cover="BACK"}setTimeout(function(){this.dispatchClassEvent("turn",{target:s.container,state:t,card:this})}.bind(this),1e3*n.turn)}},this.take=function(e){var t=getRelateBoundingRect(s.container,e),n=s.container.cloneElement({deep:!0,listeners:!0});s.parent.removeChildren(s.container),s.parent=e,s.container=n,s.container.style.top=t.top+"PX",s.container.style.left=t.left+"PX",s.parent.appendChildren(s.container),this.dispatchClassEvent("take")},this.move=function(e,i,r){if(e instanceof Element){var a=getRelateBoundingRect(s.container,s.gameField),o=getRelateBoundingRect(e,s.gameField),d=s.container.cloneElement({deep:!0,listeners:!0});s.parent.removeChild(s.container),s.container=d,s.parent=e,r?(s.container.style.top=a.top+"PX",s.container.style.left=a.left+"PX",s.gameField.appendChildren(s.container),triggerCSS(),s.container.style.height=i?i.height:null,s.container.style.width=i?i.width:null,s.container.style.top=o.top+"PX",s.container.style.left=o.left+"PX",setTimeout(function(){d=s.container.cloneElement({deep:!0,listeners:!0}),s.container.parentNode.removeChild(s.container),s.container=d,s.container.style.top="0PX",s.container.style.left="0PX",s.parent.appendChildren(s.container),this.dispatchClassEvent("move",{target:s.container,state:t})}.bind(this),1e3*n.move)):(e.appendChild(s.container),s.container.style.height=i?i.height:null,s.container.style.width=i?i.width:null,this.dispatchClassEvent("move",{target:s.container,state:t}))}},this.moveTo=function(e,i){e&&(s.container.style.left=e),i&&(s.container.style.top=i),setTimeout(function(){this.dispatchClassEvent("moveTo",{target:s.container,state:t})}.bind(this),1e3*n.move)},e.parent instanceof Element&&(s.gameField=e.gameField?e.gameField:document.body,s.parent=e.parent,s.container=s.parent.newChildElement("div",{classList:a.normal,"data-tid":"Card"}),s.container.style.height=e.size.height,s.container.style.width=e.size.width,s.covers.front=s.container.newChildElement("img",{classList:[o.common,o.front],src:e.front}),s.covers.back=s.container.newChildElement("img",{classList:[o.common,o.back],src:e.back}),!0===e.hidden&&this.toggleHidden()),Object.defineProperty(this,"cover",{get:function(){return t.cover}.bind(this)}),Object.defineProperty(this.style,"height",{set:function(e){s.container.style.height=e}.bind(this)}),Object.defineProperty(this.style,"width",{set:function(e){s.container.style.width=e}.bind(this)}),ClassEvents.apply(this,[{types:["turn","move","moveTo","remove","rotate","hide","take"],event:{target:s.container,card:this}}])}function Desk(e){this.cards=[];var t={type:"BOX",fanHiddenCards:0},n={container:null,parent:null},i="HIDDEN",s="DESK__CONTAINER";this.style={},this.pop=function(e,t,n){var i=this.cards.pop();return e instanceof Element&&i.move(e,t,n),i},this.push=function(e,t,i){this.cards.push(e),e.move(n.container,t,i)},this.removeCards=function(){for(var e=0;e<this.cards.length;e++)this.cards[e].remove(!1)},this.toggleFan=function(e,n,i,s){if("BOX"==t.type){for(var r=n*e/2,a=i*e/2,o=e;o<this.cards.length;o++)this.cards[o].hide(!1);for(o=0;o<e&&o<this.cards.length;o++)this.cards[o].rotate(n*(o+.5)-r,!0),this.cards[o].moveTo(i*(o+.5)-a+"PX",null);t.type="FAN",t.fanHiddenCards=e}else{var d=this.cards[0].addEventListener("rotate",function(){for(var e=t.fanHiddenCards;e<this.cards.length;e++)this.cards[e].unhide(!1);this.dispatchClassEvent("closeFan"),this.cards[0].removeEventListener("rotate",d),t.fanHiddenCards=0}.bind(this));for(o=0;o<t.fanHiddenCards&&o<this.cards.length;o++)this.cards[o].rotate(0,!0),this.cards[o].moveTo("0PX",null);t.type="BOX"}},this.take=function(e){var t=this.cards.pop();return t.take(e),t},this.hide=function(e){e?(n.container.style.opacity=0,setTimeout(function(){this.dispatchClassEvent("hide"),n.container.classList.add(i)}.bind(this),1e3*e.duration.hide)):n.container.classList.add(i)},this.unhide=function(e){e?(triggerCSS(),n.container.classList.remove(i),n.container.style.opacity=1,setTimeout(function(){this.dispatchClassEvent("unhide")}.bind(this),1e3*e.duration.hide)):n.container.classList.remove(i)},Object.defineProperty(this.style,"height",{set:function(e){n.container.style.height=e;for(var t=0;t<this.cards.length;t++)this.cards[t].style.height=e}.bind(this)}),Object.defineProperty(this.style,"width",{set:function(e){n.container.style.width=e;for(var t=0;t<this.cards.length;t++)this.cards[t].style.width=e}.bind(this)}),Object.defineProperty(this.style,"marginBottom",{set:function(e){n.container.style.marginBottom=e}.bind(this)}),n.parent=e.parent,n.container=n.parent.newChildElement("div",{classList:s,style:"HEIGHT:"+e.size.height+";"}),e.cards.forEach(function(t){this.push(t,e.size,!1)}.bind(this)),e.size.height&&e.size.width?(n.container.style.width=e.size.width,n.container.style.height=e.size.height,n.container.style.marginBottom=n.container.offsetWidth/2+"PX"):this.cards.length&&this.setSize(),ClassEvents.apply(this,[{types:["closeFan","hide","unhide"],event:{target:n.container,desk:this}}])}function MemoryGame(e){function t(){m.field.rows=3,m.field.cols=6,m.desk.height=d.parent.offsetHeight/3,m.desk.width=e.coverSize.width*m.desk.height/e.coverSize.height,m.deskContainer.marginBottom=m.desk.width/2,m.card.height=d.parent.offsetHeight/4.5,m.card.width=e.coverSize.width*m.card.height/e.coverSize.height}function n(){function e(){var e=getRelateBoundingRect(d.pause.deskContainer,d.container);m.deskContainer.left=e.left,m.deskContainer.top=e.top,d.cardsContainer.style.left=m.deskContainer.left+"PX",d.cardsContainer.style.top=m.deskContainer.top+"PX"}d.container.classList.contains(c.container.game)?(d.container.classList.remove(c.container.game),d.container.classList.add(c.container.pause),triggerCSS(),e(),d.container.classList.remove(c.container.pause),d.container.classList.add(c.container.game)):e(),console.log("RESIZING..."),t(),function(){d.container.offsetHeight>d.container.offsetWidth&&(d.container.style.minWidth=d.container.offsetHeight+"PX"),o.style.height=m.desk.height+"PX",o.style.width=m.desk.width+"PX",o.style.marginBottom=m.deskContainer.marginBottom+"PX";for(var e=0;e<m.field.rows;e++)for(var t=0;t<m.field.cols;t++){d.game.field.rows[e].cells[t].style.height=m.card.height+"PX",d.game.field.rows[e].cells[t].style.width=m.card.width+"PX";var n=u[e*m.field.cols+t];n&&(n.style.height=m.card.height+"PX",n.style.width=m.card.width+"PX")}}()}function i(t,n,i,s,r){var a=new Card({back:e.cardCovers.back,front:t,hidden:!1,parent:d.cardsContainer,gameField:d.container,size:{height:m.desk.height+"PX",width:m.desk.width+"PX"}});return a.dataset.id=s,a.dataset.position=r,a.addEventListener("click",i),a}function s(){function e(){function e(){for(var e=0;e<u.length;e++)u[e].turn(!0)}h.newGame?(h.newGame=0,u[0].removeEventListener("move",t),e(),setTimeout(function(){e(),h.cardsTurnable=!0,d.pause.options.continue.disabled=!1,d.game.pauseButton.disabled=!1}.bind(this),1e3*l)):h.screen="GAME"}for(var t,n=o.addEventListener("closeFan",function(){d.cardsContainer.classList.remove(c.hidden),d.container.classList.remove(c.container.pause),d.container.classList.add(c.container.game),h.screen="GAME",h.newGame?t=u[0].addEventListener("move",e):h.cardsTurnable=!0,h.turnedCard&&h.turnedCard.turn(!0);for(var i=0;i<u.length;i++)u[i].move(d.game.field.rows[u[i].dataset.position.row].cells[u[i].dataset.position.col],{height:m.card.height+"PX",width:m.card.width+"PX"},!0);toggleHideElements([d.game.score,d.game.pauseButton],p.duration.hide,!1),o.removeEventListener("closeFan",n)}.bind(this)),i=0;i<o.cards.length;i++)1==o.cards[i].dataset.turned&&o.cards[i].turn(!0);o.toggleFan(),toggleHideElements([d.pause.options.continue,d.pause.options.newGame,d.pause.headline],p.duration.hide,!0)}function r(){function e(){"GAME"==h.screen&&(u[0].removeEventListener("move",n),d.pause.deskContainer.style.opacity=1,d.cardsContainer.classList.add(c.hidden)),h.isWin?(d.pause.deskContainer.style.opacity=0,d.pause.headline.innerHTML=(h.score>=0?"Победа со счётом: ":"Потрачено: ")+h.score,d.pause.options.continue.disabled=!0,h.score=0):d.pause.headline.innerHTML="MEMORY GAME",d.container.classList.remove(c.container.game),d.container.classList.add(c.container.pause),h.screen="MENU",toggleHideElements([d.pause.options.continue,d.pause.options.newGame,d.pause.headline],p.duration.hide,!1,function(){toggleHideElements([d.pause.deskContainer],p.duration.hide,!1),o.toggleFan(4,35,10,!0);for(var e=0;e<o.cards.length;e++)h.isWin?(o.cards[e].turn(!0),o.cards[e].dataset.turned=!0):1==o.cards[e].dataset.turned&&o.cards[e].turn(!0);h.isWin=!1}.bind(this))}function t(e){toggleHideElements([d.game.score,d.game.pauseButton],p.duration.hide,!0,e)}if(h.cardsTurnable=!1,"GAME"==h.screen){var n;t(),function(){h.turnedCard&&h.turnedCard.turn(!0),n=u[0].addEventListener("move",e);for(var t=0;t<u.length;t++)u[t].move(d.cardsContainer,{width:m.desk.width+"PX",height:m.desk.height+"PX"},!0)}()}else t(e.bind(this))}function a(e){if(h.cardsTurnable){var t,n,i;if(h.turnedCard){if(h.turnedCard==e.card)return;h.turnedCard.dataset.id==e.card.dataset.id?(t="REMOVE",n=e.card,i=h.turnedCard,u.splice(u.indexOf(h.turnedCard),1),u.splice(u.indexOf(e.card),1),h.turnedCard=null,h.score+=42*u.length,d.game.score.innerHTML="Cчёт: "+h.score,u.length||(h.isWin=!0,h.screen="MENU",r())):(t="TURN",n=e.card,i=h.turnedCard,h.turnedCard=null,h.score-=42*(m.field.cols*m.field.rows-u.length),d.game.score.innerHTML="Cчёт: "+h.score)}else h.turnedCard=e.card;e.card.turn(!0);var s=e.card.addEventListener("turn",function(t,n,i){"REMOVE"==t?(n.remove(!0),i.remove(!0)):"TURN"==t&&(n.turn(!0),i.turn(!0)),e.card.removeEventListener("turn",s),n=null,i=null}.bind(this,t,n,i))}}var o,d={parent:null,container:null,pause:{menu:null,deskContainer:null,headline:null,optionsContainer:null,options:{continue:null,newGame:null}},game:{cardsContainer:null,statusbar:null,score:null,pauseButton:null,field:null}},c={hidden:"HIDDEN",wrap:"WRAP",divider:"DIVIDER",cardsContainer:"MEMORY__CARDSCONTAINER",button:"MEMORY__BUTTON",container:{common:"MEMORY__CONTAINER",pause:"MEMORY__CONTAINER--PAUSE",game:"MEMORY__CONTAINER--GAME"},pause:{menu:"MEMORY__MENU",deskContainer:"MEMORY__DESKCONTAINER",headline:"MEMORY__HEADLINE"},game:{main:"MEMORY__GAME",statusbar:"MEMORY__STATUSBAR",field:"MEMORY__FIELD"}},l=5,h={screen:"MENU",score:0,cardsTurnable:!1,turnedCardId:null,turnedCard:null,newGame:1,isWin:0},u=[],p={duration:{hide:.3}},m={desk:{width:0,height:0},deskContainer:{marginBottom:0,left:0,top:0},card:{width:0,height:0},field:{rows:0,cols:0},menuFan:{cardsAmount:4}};d.parent=e.parent,d.container=d.parent.newChildElement("div",{classList:[c.container.common,c.container.pause,c.wrap],"data-tid":"App"}),d.cardsContainer=d.container.newChildElement("div",{classList:[c.cardsContainer,c.hidden]}),t(),d.pause.menu=d.container.newChildElement("div",{classList:[c.pause.menu,c.wrap]}),d.pause.deskContainer=d.pause.menu.newChildElement("div",{classList:[c.pause.deskContainer,c.wrap]}),d.pause.headline=d.pause.menu.newChildElement("div",{classList:[c.pause.headline,c.wrap]},"MEMORY GAME"),d.pause.optionsContainer=d.pause.menu.newChildElement("div",{classList:c.wrap}),d.pause.options.continue=d.pause.optionsContainer.newChildElement("button",{classList:c.button},"Продолжить"),d.pause.options.newGame=d.pause.optionsContainer.newChildElement("button",{classList:c.button,"data-tid":"NewGame-startGame"},"Новая игра"),d.container.setEventListeners({resize:n.bind(this)}),d.pause.options.continue.setEventListeners({click:function(e){s()}.bind(this)}),d.pause.options.newGame.setEventListeners({click:function(t){h.newGame=1,d.game.score.innerHTML="Счёт: 0",d.game.pauseButton.disabled=!0,d.pause.options.continue.disabled=!0,function(){for(var t=e.cardCovers.front.slice(),n=[],s=0;s<m.field.rows;s++)for(var r=0;r<m.field.cols;r++)n[s*m.field.cols+r]={row:s,col:r};for(var o=0;o<u.length;o++)u[o].remove(!1);for(u=[],o=0;o<m.field.rows*m.field.cols/2;o++){var d=t.popRandom();u.push(i(d,0,a.bind(this),o,n.popRandom())),u.push(i(d,0,a.bind(this),o,n.popRandom()))}}(),s()}.bind(this)}),d.pause.options.continue.disabled=!0,d.game.wrap=d.container.newChildElement("div",{classList:[c.wrap,c.game.main]}),d.game.status=d.game.wrap.newChildElement("div",{classList:[c.wrap,c.game.statusbar]}),d.game.score=d.game.status.newChildElement("div",{"data-tid":"Menu-scores"},"Счёт: 0"),d.game.status.newChildElement("div",{classList:c.divider}),d.game.pauseButton=d.game.status.newChildElement("button",{classList:c.button},"Пауза"),d.game.field=d.game.wrap.newChildElement("table",{classList:[c.wrap,c.game.field],"data-tid":"Deck"});for(var g=document.newElement("td",{style:"WIDTH:"+m.card.width+"PX;HEIGHT:"+m.card.height+"PX;"}),f=0;f<m.field.rows;f++){d.game.field.newChildElement("tr");for(var v=0;v<m.field.cols;v++)d.game.field.rows[f].appendChild(g.cloneNode(!0))}d.game.pauseButton.setEventListeners({click:function(){r()}.bind(this)}),o=new Desk({cards:[],size:{height:m.desk.height+"PX",width:m.desk.width+"PX"},parent:d.pause.deskContainer}),function(){var t=e.cardCovers.front;o.removeCards();for(var n=0;n<m.menuFan.cardsAmount;n++)o.push(i(t.popRandom(),0,function(e){"BACK"==e.card.cover?e.card.dataset.turned=!0:e.card.dataset.turned=!1,e.card.turn(!0)}.bind(this)),{height:m.desk.height+"PX",width:m.desk.width+"PX"},!1)}(),n(),r()}Element.prototype.setEventListeners=function(e){if(e&&isObject(e)){this.__events__=this.__events__||{};for(var t in e)isArray(e[t])||(e[t]=[e[t]]),this.__events__[t]=this.__events__[t]||[],e[t].forEach(function(e){isFunction(e)?("resize"==t&&"IFRAME"!=this.tagName&&this.__events__.resize&&!this.__events__.resize.length&&(this.__resizer__=this.newChildElementBefore(this.children[0],"iframe",{style:"WIDTH:100%;HEIGHT:100%;POSITION:ABSOLUTE;OPACITY:0;BORDER:NONE;",name:"BASIS__RESIZER"}),this.__resizer__.contentWindow.onresize=function(){this.dispatchEvent(new Event("resize"))}.bind(this)),this.__events__[t].push(e),this.addEventListener(t,e)):console.warn('ERROR: cannot set something except Function as an event listener to event, called "'+t+'". Skipping.')}.bind(this))}else console.warn("ERROR: argument passed to setEventListeners method is not an Object. Skipping.")},Element.prototype.removeEventListeners=function(e){if(e&&isObject(e)){this.__events__=this.__events__||{};for(var t in e)isArray(e[t])||(e[t]=[e[t]]),this.__events__[t]=this.__events__[t]||[],e[t].forEach(function(e){if(isFunction(e)){var n=this.__events__[t].indexOf(e);-1!=n&&(this.__events__[t].splice(n,1),"resize"!=t||this.__events__[t].length||this.removeChildren(this.__resizer__)),this.removeEventListener(t,e)}else console.warn('ERROR: cannot remove something except Function as an event listener to event, called "'+t+'". Skipping.')}.bind(this))}else console.warn("ERROR: argument passed to setEventListeners method is not an Object. Skipping.")},Element.prototype.cloneElement=function(e){var t;return e.deep,t=this.cloneNode(!0),e.listeners&&(t.__events__=this.__events__,t.setEventListeners(t.__events__)),t},Element.prototype.removeCSS=function(){Array.from(arguments).forEach(function(e){isString(e)?this.classList.remove(e):isArray(e)?this.setCSS.apply(this,e):console.warn("ERROR: cannot remove something except String as an CSS-class. Skipping.")}.bind(this))},Element.prototype.setCSS=function(){Array.from(arguments).forEach(function(e){isString(e)?this.classList.add(e):isArray(e)?this.setCSS.apply(this,e):console.warn("ERROR: cannot set something except String as an CSS-class. Skipping.")}.bind(this))},Element.prototype.setAttributes=function(e){if(isObject(e))for(var t in e)e[t]?this.setAttribute(t,e[t]):this.removeAttribute(t);else console.warn("ERROR: argument passed to setAttributes method is not an Object. Skipping.")},Element.prototype.removeAttributes=function(){Array.from(arguments).forEach(function(e){isString(e)?this.removeAttribute(e):isArray(e)?this.removeAttributes.apply(this,e):console.warn("ERROR: cannot remove attribute because given id is not a String. Skipping.")}.bind(this))},Element.prototype.setProperties=function(e){isObject(e.eventListeners)?this.setEventListeners(e.eventListeners):e.eventListeners&&console.warn("ERROR: argument passed to setEventListeners method is not an Object. Skipping"),isArray(e.classList)||isString(e.classList)?this.setCSS(e.classList):e.classList&&console.warn("ERROR: cannot set something except String or Array as an CSS-class. Skipping."),delete e.eventListeners,delete e.classList,this.setAttributes(e)},Element.prototype.appendChildren=function(){Array.from(arguments).forEach(function(e){isElement(e)?this.appendChild(e):isText(e)||isString(e)?this.innerHTML+=e:isArray(e)&&!isString(e)?this.appendChildren.apply(this,e):(console.log(e),console.warn("ERROR: cannot append something except String, Text or Element as an DOMElement. Skipping."))}.bind(this))},Element.prototype.removeChildren=function(){Array.from(arguments).forEach(function(e){isElement(e)||isText(e)?this.removeChild(e):isArray(e)&&!isString(e)?this.removeChildren.apply(this,e):console.warn("ERROR: cannot remove something except Text or Element as an DOMElement. Skipping.")}.bind(this))},Document.prototype.newElement=function(){if("string"!=typeof(arguments=Array.from(arguments))[0])return console.warn("ERROR: first argument passed to newElement method is not an String. Skipping."),null;var e=document.createElement(arguments[0]);return!(arguments=arguments.slice(1))[0]||isArray(arguments[0])||isElement(arguments[0])||isString(arguments[0])||(e.setProperties(arguments[0]),arguments=arguments.slice(1)),arguments[0]&&(isArray(arguments[0])||isElement(arguments[0])||isString(arguments[0]))&&e.appendChildren.apply(e,arguments),e},Element.prototype.newChildElement=function(){var e=document.newElement.apply(null,arguments);return e&&this.appendChild(e),e},Element.prototype.newChildElementBefore=function(){var e=document.newElement.apply(null,Array.from(arguments).splice(1,arguments.length-1));return e&&(isElement(arguments[0])?this.insertBefore(e,arguments[0]):this.appendChild(e)),e},Array.prototype.popRandom=function(){var e=Math.floor(Math.random()*this.length),t=this[e];return this.splice(e,1),t};
